(function(){class a extends HTMLElement{get childrenFn(){return this._childrenFn}set childrenFn(a){this._childrenFn=a,this.onPropsChange()}get keyFn(){return this._keyFn}set keyFn(a){this._keyFn=a,this.onPropsChange()}get isSelectedFn(){return this._isSelectedFn}set isSelectedFn(a){this._isSelectedFn=a}get toggleNodeSelectionFn(){return this._toggleNodeSelectionFn}set toggleNodeSelectionFn(a){this._toggleNodeSelectionFn=a}get toggleIndeterminateFn(){return this._toggleInterminateFn}set toggleIndeterminateFn(a){this._toggleInterminateFn=a}set toggledNodeSelection(a){this._isSelectedFn(a)?this.unselectNodeAndCascade(a):this.selectNodeAndCascade(a)}selectNodeShallow(a){this._isSelectedFn(a)||this._toggleNodeSelectionFn(a)}unselectNodeShallow(a){this._isSelectedFn(a)&&this._toggleNodeSelectionFn(a)}selectNodeAndCascade(a){this.selectNodeRecursive(a);let b=a;do{const a=this._keyFn(b),c=this._childToParentLookup[a];if(c){const a=this._keyFn(c);this._selectedChildScore[a]++;const b=this._childrenFn(c);this._selectedChildScore[a]===b.length?this.selectNodeShallow(c):this._toggleInterminateFn(c)}b=c}while(b)}unselectNodeAndCascade(a){this.unselectNodeRecursive(a);let b=a;do{const a=this._keyFn(b),c=this._childToParentLookup[a];if(c){const a=this._keyFn(c);this._selectedChildScore[a]--;this._childrenFn(c);0===this._selectedChildScore[a]?this.unselectNodeShallow(c):this._toggleInterminateFn(c)}b=c}while(b)}set newSelectedNodeToggle(a){this._isSelectedFn(a)?this.unselectNodeAndCascade(a):this.selectNodeAndCascade(a)}selectNodeRecursive(a){this.selectNodeShallow(a);const b=this._childrenFn(a);b&&(this._selectedChildScore[this._keyFn(a)]=b.length,b.forEach((a)=>this.selectNodeRecursive(a)))}unselectNodeRecursive(a){this.unselectNodeShallow(a);const b=this._childrenFn(a);b&&(this._selectedChildScore[this._keyFn(a)]=0,b.forEach((a)=>this.unselectNodeRecursive(a)))}get nodes(){return this._nodes}set nodes(a){this._nodes=a,this.onPropsChange()}onPropsChange(){this._keyFn&&this._childrenFn&&this._nodes&&this._isSelectedFn&&this._toggleNodeSelectionFn&&this._toggleInterminateFn&&this.startCreatingChildToParentLookup()}startCreatingChildToParentLookup(){this._childToParentLookup={},this._selectedChildScore={},this.createChildToParentLookup(this._nodes,this._childToParentLookup)}createChildToParentLookup(a,b){a.forEach((a)=>{const c=this._keyFn(a),d=this._selectedChildScore;d[c]=0;const e=this._childrenFn(a);e&&(e.forEach((e)=>{this._isSelectedFn(e)&&d[c]++;const f=this._keyFn(e);b[f]=a}),d[c]===e.length?this.selectNodeShallow(a):0<d[c]&&this._toggleInterminateFn(a),this.createChildToParentLookup(e,b))})}}customElements.define('xtal-cascade',a)})();