(function(){var a=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'attributeChangedCallback',value:function(a,b,c){'search-string'===a?(this._searchString=c,this.searchNodes()):'sorted'===a?(this._sorted=c,this.sort(!0)):void 0}},{key:'_upgradeProperty',value:function(a){if(this.hasOwnProperty(a)){var b=this[a];delete this[a],this[a]=b}}},{key:'connectedCallback',value:function(){for(var a in b.properties)this._upgradeProperty(a)}},{key:'sort',value:function(a){this._sorted&&this._compareFn&&this._nodes&&(this.sortNodes(this._nodes),a&&this.updateViewableNodes())}},{key:'sortNodes',value:function(a,b){var c=this;b||('desc'===this.sorted?b=function(a,b){return-1*c._compareFn(a,b)}:b=this._compareFn),a.sort(b),a.forEach(function(a){var d=c._childrenFn(a);d&&c.sortNodes(d,b)})}},{key:'notifyViewNodesChanged',value:function(){var a=new CustomEvent('viewable-nodes-changed',{detail:{value:this.viewableNodes},bubbles:!0,composed:!0});this.dispatchEvent(a)}},{key:'onPropsChange',value:function(){this._isOpenFn&&this._childrenFn&&this._nodes&&(this._levelSetterFn&&this._levelSetterFn(this._nodes,0),this.updateViewableNodes())}},{key:'_calculateViewableNodes',value:function(a,b){var c=this;if(a)return a.forEach(function(a){(!c.searchString||c._isOpenFn(a)||c._testNodeFn(a,c.searchString))&&(b.push(a),c._isOpenFn(a)&&c._calculateViewableNodes(c._childrenFn(a),b))}),b}},{key:'updateViewableNodes',value:function(){this._viewableNodes=this._calculateViewableNodes(this._nodes,[]),this.notifyViewNodesChanged()}},{key:'searchNodes',value:function(){this._testNodeFn&&(this.collapseAll(this._nodes),this.search(this._nodes,null),this.updateViewableNodes())}},{key:'search',value:function(a,b){var c=this;a.forEach(function(a){if(c._testNodeFn(a,c._searchString))b&&c.openNode(b);else{var d=c._childrenFn(a);d&&(c.search(d,a),b&&c._isOpenFn(a)&&c.openNode(b))}})}},{key:'openNode',value:function(a){this._isOpenFn(a)||this._toggleNodeFn(a)}},{key:'expandAll',value:function(a){var b=this;a.forEach(function(a){b.openNode(a);var c=b._childrenFn(a);c&&b.expandAll(c)})}},{key:'closeNode',value:function(a){this._isOpenFn(a)&&this._toggleNodeFn(a)}},{key:'collapseAll',value:function(a){var b=this;a.forEach(function(a){b.closeNode(a);var c=b._childrenFn(a);c&&b.collapseAll(c)})}},{key:'childrenFn',get:function(){return this._childrenFn},set:function(a){this._childrenFn=a,this.onPropsChange()}},{key:'isOpenFn',get:function(){return this._isOpenFn},set:function(a){this._isOpenFn=a,this.onPropsChange()}},{key:'nodes',get:function(){return this._nodes},set:function(a){this._nodes=a,this.sort(!1),this.onPropsChange()}},{key:'searchString',get:function(){return this._searchString},set:function(a){this.setAttribute('search-string',a)}},{key:'testNodeFn',get:function(){return this._testNodeFn},set:function(a){this._testNodeFn=a}},{key:'compareFn',get:function(){return this._compareFn},set:function(a){this._compareFn=a,this.sort(!0)}},{key:'sorted',get:function(){return this._sorted},set:function(a){this.setAttribute('sorted',a)}},{key:'viewableNodes',get:function(){return this._viewableNodes},set:function(a){this._viewableNodes=a}},{key:'toggleNodeFn',get:function(){return this._toggleNodeFn},set:function(a){this._toggleNodeFn=a}},{key:'toggledNode',set:function(a){this._toggleNodeFn(a),this.updateViewableNodes()}},{key:'allExpandedNodes',set:function(a){this.expandAll(a),this.updateViewableNodes()}},{key:'allCollapsedNodes',set:function(a){this.collapseAll(a),this.updateViewableNodes()}},{key:'levelSetterFn',set:function(a){this._levelSetterFn=a},get:function(){return this._levelSetterFn}}],[{key:'observedAttributes',get:function(){return['search-string','sorted']}},{key:'properties',get:function(){return{childrenFn:null,compareFn:null,isOpenFn:null,nodes:null,searchString:null,sorted:null,testNodeFn:null,toggledNode:null,toggleNodeFn:null}}}]),b}(HTMLElement);customElements.define('xtal-tree',a)})();